file = open('boot.py','w')
file.write('def do_connect(ESSID,password):\n import network\n network.WLAN(network.AP_IF).active(False)\n sta_if = network.WLAN(network.STA_IF)\n if not sta_if.isconnected():\n  print("connecting to network...")\n  sta_if.active(True)\n  sta_if.connect(ESSID, password)\n  while not sta_if.isconnected():\n   pass\n  print("network config:", sta_if.ifconfig())\n\ndef credentialsRead(filename):\n file = open(filename,"r")\n f = file.read().split("\\n")\n file.close()\n return f\n\ndo_connect(*credentialsRead("wifi.ini"))\n\nclass connection:\n def __init__(self, IP, port):\n  self.IP = IP\n  self.port = port\n  self.startConnection()\n\n def startConnection(self):\n  import socket\n  self.s = socket.socket()\n  try:\n   self.s.connect((self.IP, self.port))\n  except(KeyboardInterrupt):\n   exit\n\n def sendData(self, state):\n  try:\n   self.s.send(str(state))\n  except(KeyboardInterrupt):\n   exit\n\ndef sendSocket():\n import machine, time\n pinIN = machine.Pin(2, machine.Pin.IN, machine.Pin.PULL_UP)\n pin_state = pinIN.value()\n while True:\n  try:\n   if pinIN.value() != pin_state:\n    pin_state = pinIN.value()\n    client_soc = connection("192.168.0.73", 2198)\n    client_soc.sendData("0")\n    client_soc.s.recv(1)\n    client_soc.s.close()\n    time.sleep(2)\n  except(ValueError):\n   print("Invalid Input")\n   client_soc.close()\n  except(OSError):\n   print("Timed Out")\n   client_soc.close()\n\nsendSocket()\n')
file.close()